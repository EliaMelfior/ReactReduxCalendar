{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nexport const notificationSlice = createSlice({\n  name: 'notifications',\n  initialState: {\n    notificationModalState: false,\n    notificationCreationModalState: false,\n    allNotifications: [],\n    dayNotifications: [],\n    currentDay: '',\n    monthObject: ''\n  },\n  reducers: {\n    createNotification: (state, notificationObj) => {\n      state.notificationCreationModalState = false;\n      state.notificationModalState = false;\n      let latitude = parseInt(notificationObj.payload.city.latitude, 10).toFixed(2);\n      let longitude = parseInt(notificationObj.payload.city.longitude, 10).toFixed(2);\n      let headers = new Headers();\n      let myKey = 'a6701356fb5118f9f90329a760cf82f0';\n      let date = notificationObj.payload.date;\n      let oldDate = date.setDate(date.getDate() - 1825);\n      headers.append('Content-Type', 'application/json');\n      headers.append('Access-Control-Allow-Origin', '*');\n      headers.append('Access-Control-Allow-Methods', 'GET,POST,OPTIONS,DELETE');\n      headers.append(\"Access-Control-Allow-Headers\", \"X-Requested-With, Access-Control-Allow-Headers, Content-Type, Authorization, Origin, Accept\");\n      headers.append('Access-Control-Allow-Credentials', true);\n      window.fetch(\"http://history.openweathermap.org/data/2.5/history/citylat=\" + latitude + \"&lon\" + longitude + \"&type=hour&start\" + oldDate + \"&cnt=1&appid=\" + myKey, {\n        method: 'GET',\n        headers: headers\n      }).then(res => {\n        let weatherForecast = res.weather.description;\n        debugger;\n        notificationObj.payload.weatherForecast = weatherForecast;\n        state.allNotifications.push(notificationObj.payload);\n      });\n    },\n    deleteNotification: (state, notificationObj) => {\n      state.allNotifications = state.allNotifications.filter(notification => {\n        let notificationDate = new Date(notification.date);\n        let notificationDescription = notification.description;\n        let objectDate = new Date(notificationObj.payload.date);\n        let objectDescription = notificationObj.payload.description;\n        return notificationDate != objectDate && notificationDescription != objectDescription;\n      });\n      state.dayNotifications = state.dayNotifications.filter(notification => {\n        let notificationDate = new Date(notification.date);\n        let notificationDescription = notification.description;\n        let objectDate = new Date(notificationObj.payload.date);\n        let objectDescription = notificationObj.payload.description;\n        return notificationDate != objectDate && notificationDescription != objectDescription;\n      });\n      state.notificationModalState = false;\n    },\n    editNotification: (state, notificationId) => {},\n    changeModalState: (state, monthObject) => {\n      let allNotifications = state.allNotifications;\n      state.currentDay = monthObject.payload;\n      state.dayNotifications = allNotifications.filter(notification => {\n        let notificationDate = new Date(notification.date);\n        let currentDayDate = new Date(state.currentDay.dateObject);\n        return notificationDate.getFullYear() === currentDayDate.getFullYear() && notificationDate.getMonth() === currentDayDate.getMonth() && notificationDate.getDate() === currentDayDate.getDate();\n      });\n      state.monthObject = monthObject;\n      state.notificationModalState = !state.notificationModalState;\n    },\n    changeCreationModalState: (state, monthObject) => {\n      state.monthObject = monthObject;\n      state.notificationModalState = false;\n      state.notificationCreationModalState = !state.notificationCreationModalState;\n    }\n  }\n});\nexport const {\n  createNotification,\n  deleteNotification,\n  editNotification,\n  changeModalState,\n  changeCreationModalState\n} = notificationSlice.actions;\nexport default notificationSlice.reducer;","map":{"version":3,"sources":["/home/elia/projects/ReactChallenge/src/reducers/notificationSlice.js"],"names":["createSlice","notificationSlice","name","initialState","notificationModalState","notificationCreationModalState","allNotifications","dayNotifications","currentDay","monthObject","reducers","createNotification","state","notificationObj","latitude","parseInt","payload","city","toFixed","longitude","headers","Headers","myKey","date","oldDate","setDate","getDate","append","window","fetch","method","then","res","weatherForecast","weather","description","push","deleteNotification","filter","notification","notificationDate","Date","notificationDescription","objectDate","objectDescription","editNotification","notificationId","changeModalState","currentDayDate","dateObject","getFullYear","getMonth","changeCreationModalState","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const notificationSlice = createSlice({\n    name: 'notifications',\n    initialState: {\n        notificationModalState: false,\n        notificationCreationModalState: false,\n        allNotifications: [],\n        dayNotifications: [],\n        currentDay: '',\n        monthObject: ''\n    },\n    reducers: {\n        createNotification: (state, notificationObj) => {\n            state.notificationCreationModalState = false;\n            state.notificationModalState = false;\n            let latitude = parseInt(notificationObj.payload.city.latitude, 10).toFixed(2);\n            let longitude = parseInt(notificationObj.payload.city.longitude, 10).toFixed(2);\n            let headers = new Headers();\n            let myKey = 'a6701356fb5118f9f90329a760cf82f0';\n            let date = notificationObj.payload.date;\n            let oldDate = date.setDate(date.getDate() - 1825);\n\n            headers.append('Content-Type', 'application/json');\n            headers.append('Access-Control-Allow-Origin', '*');\n            headers.append('Access-Control-Allow-Methods', 'GET,POST,OPTIONS,DELETE');\n            headers.append(\"Access-Control-Allow-Headers\", \"X-Requested-With, Access-Control-Allow-Headers, Content-Type, Authorization, Origin, Accept\");\n            headers.append('Access-Control-Allow-Credentials', true);\n\n\n            window.fetch(\"http://history.openweathermap.org/data/2.5/history/citylat=\"\n            + latitude + \"&lon\" + longitude + \"&type=hour&start\" + oldDate + \"&cnt=1&appid=\" + myKey,\n                {   method: 'GET',\n                    headers: headers })\n            .then(res => {\n                let weatherForecast = res.weather.description;\n\n                debugger;\n                notificationObj.payload.weatherForecast = weatherForecast;\n\n                state.allNotifications.push(notificationObj.payload);\n            });\n        },\n        deleteNotification: (state, notificationObj) => {\n            state.allNotifications = state.allNotifications.filter((notification) => {\n                let notificationDate = new Date(notification.date);\n                let notificationDescription = notification.description;\n                let objectDate = new Date(notificationObj.payload.date);\n                let objectDescription = notificationObj.payload.description;\n\n                return (notificationDate != objectDate &&\n                        notificationDescription != objectDescription);\n            });\n\n            state.dayNotifications = state.dayNotifications.filter((notification) => {\n                let notificationDate = new Date(notification.date);\n                let notificationDescription = notification.description;\n                let objectDate = new Date(notificationObj.payload.date);\n                let objectDescription = notificationObj.payload.description;\n\n                return (notificationDate != objectDate &&\n                        notificationDescription != objectDescription);\n            });\n\n            state.notificationModalState = false;\n        },\n        editNotification: (state, notificationId) => {\n\n        },\n        changeModalState: (state, monthObject) => {\n            let allNotifications = state.allNotifications;\n\n            state.currentDay = monthObject.payload;\n\n            state.dayNotifications = allNotifications.filter( (notification) => {\n                let notificationDate = new Date(notification.date);\n                let currentDayDate = new Date(state.currentDay.dateObject);\n\n                return (notificationDate.getFullYear() === currentDayDate.getFullYear() &&\n                notificationDate.getMonth() === currentDayDate.getMonth() &&\n                notificationDate.getDate() === currentDayDate.getDate())\n            });\n\n            state.monthObject = monthObject;\n            state.notificationModalState = !state.notificationModalState;\n        },\n        changeCreationModalState: (state, monthObject) => {\n            state.monthObject = monthObject;\n            state.notificationModalState = false;\n            state.notificationCreationModalState = !state.notificationCreationModalState;\n        }\n    }\n});\n\nexport const { createNotification, deleteNotification, editNotification, changeModalState, changeCreationModalState } = notificationSlice.actions\n\nexport default notificationSlice.reducer"]},"metadata":{},"sourceType":"module"}